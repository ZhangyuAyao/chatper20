# chapter20-坦克大战05
## IO流- 应用到坦克大战
- 增加功能
1. 防止敌人坦克重叠运动
2. 记录玩家的成绩，存盘退出
3. 记录当时的敌人坦克坐标，存盘退出
4. 玩游戏时，可以选择是开新游戏还是继续上局游戏

### 防止敌人坦克重叠运动
- 自己的思路：
无
- 遇到的问题：
1. 不知道怎么样判断坦克重叠
2. 不知道判断条件加在哪里

- 老师的思路：
![image.png](https://note.youdao.com/yws/res/9/WEBRESOURCEa2fabb1dd281e3e74912ea8caa42ff19)

- 分析：
1. 判断坦克重叠：根据黄色坦克的前进方向判断，判断前进方向的左右两个点是否进入到了别的坦克区域内。一共有8种情况
2. 判断条件加在坦克移动的地方（坦克自己的线程内），如果重叠了，则不会继续移动

### 记录玩家的总成绩-存盘退出
自己的思路：
1. 根据oop的思路，新创建一个玩家成绩类Record
2. Record在myPanel中初始化，在myPanel线程中一致判断存活的数量，原始数量-存活敌人数量则为玩家成绩

老师的思路：
1. 思路基本我自己的思路一致，也是创建了一个Record类，然后通过在hitTank方法中判断如果集中的坦克类型是EnemyTank，则分数加一。
2. 通过BufferWriter写入，写入的时机是退出游戏时

### 记录当时的敌人坦克坐标，存盘退出
老师思路：
1. 坐标的格式：x y direct，通过BufferWriter写入，写入时机和玩家成绩的时机一致，也是退出游戏时

### 玩游戏时，可以选择是新开游戏还是继续上一局游戏
我的思路：
1. 在新开的游戏中，有一个界面可以选择新开游戏或者继续上局游戏
2. 新开游戏则不载入存档
3. 继续上局游戏则载入存档

老师思路：
1. 将敌人的坐标方向当做一个 Node 节点，将每个敌人的信息恢复成 Node 对象 => Vector
2. 在初始化坦克的时候将 node的坐标、方向给到EnemyTank

![image.png](https://note.youdao.com/yws/res/e/WEBRESOURCE4d376820d978203ef24037c008c154ee)

播放音乐是用一个现成的java类，直接使用，不用管他是怎么使用的

### 修正文件的存储位置
修改成工程目录下的的 "src\\record.txt"

### 处理文件相关异常 => 提升代码的健壮性
如果第一次打开游戏，会读取"src\\record.txt"下的文件，但是该文件不存在会导致一个异常

老师思路：
1. 通过File类，来判断文件是否存在，如果存在就正常读取，不存在的话将key置为1，即开启新游戏